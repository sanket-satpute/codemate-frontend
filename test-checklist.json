{
  "unitTests": [
    {
      "testFilePath": "src/app/features/auth/login/login.spec.ts",
      "testDescription": "LoginComponent - Basic functionality and error handling",
      "testSteps": [
        "Should create the component",
        "Should call AuthService.login on form submission with correct token",
        "Should store JWT in localStorage and navigate to dashboard on successful login",
        "Should display error message on login failure",
        "Should disable login button when loading"
      ],
      "expectedAssertions": [
        "expect(component).toBeTruthy()",
        "expect(authService.login).toHaveBeenCalledWith(token)",
        "expect(localStorage.setItem).toHaveBeenCalledWith('token', 'jwt-token')",
        "expect(router.navigate).toHaveBeenCalledWith(['/dashboard'])",
        "expect(component.errorMessage).toBe('Error message')",
        "expect(component.isLoading).toBeTrue()"
      ]
    },
    {
      "testFilePath": "src/app/pages/dashboard/dashboard.spec.ts",
      "testDescription": "DashboardComponent - Project listing and loading states",
      "testSteps": [
        "Should create the component",
        "Should fetch projects on ngOnInit",
        "Should display projects when loaded successfully",
        "Should display empty state when no projects are found",
        "Should display error message if project fetch fails",
        "Should navigate to project detail on project card click"
      ],
      "expectedAssertions": [
        "expect(component).toBeTruthy()",
        "expect(projectService.getProjects).toHaveBeenCalled()",
        "expect(component.projects.length).toBeGreaterThan(0)",
        "expect(component.isLoading).toBeFalse()",
        "expect(component.errorMessage).toBe('')",
        "expect(component.projects.length).toBe(0)",
        "expect(component.errorMessage).toBe('Failed to load projects. Please try again later.')",
        "expect(router.navigate).toHaveBeenCalledWith(['/projects', 'project-id'])"
      ]
    },
    {
      "testFilePath": "src/app/pages/upload/upload.spec.ts",
      "testDescription": "UploadComponent - File selection, upload, and retry functionality",
      "testSteps": [
        "Should create the component",
        "Should set selectedFile on onFileSelected",
        "Should call UploadService.uploadFile on uploadFile",
        "Should update progress and navigate on successful upload",
        "Should set error message on upload failure",
        "Should reset state on retryUpload"
      ],
      "expectedAssertions": [
        "expect(component).toBeTruthy()",
        "expect(component.selectedFile).toEqual(mockFile)",
        "expect(uploadService.uploadFile).toHaveBeenCalledWith(mockFile)",
        "expect(component.uploadProgress).toBe(100)",
        "expect(component.uploadSuccess).toBeTrue()",
        "expect(router.navigate).toHaveBeenCalledWith(['/projects', 'proj123'])",
        "expect(component.errorMessage).toBe('File upload failed. Please try again.')",
        "expect(component.uploadProgress).toBe(0)",
        "expect(component.isUploading).toBeFalse()",
        "expect(component.uploadSuccess).toBeFalse()",
        "expect(component.errorMessage).toBe('')"
      ]
    },
    {
      "testFilePath": "src/app/pages/project-detail/project-detail.spec.ts",
      "testDescription": "ProjectDetailComponent - Project details loading, file selection, and error handling",
      "testSteps": [
        "Should create the component",
        "Should load project details on ngOnInit",
        "Should set error message if project ID is missing",
        "Should set error message if project details fetch fails",
        "Should update selectedFile on onFileSelected"
      ],
      "expectedAssertions": [
        "expect(component).toBeTruthy()",
        "expect(projectService.getProjectDetail).toHaveBeenCalledWith('test-project-id')",
        "expect(component.projectDetails$).toBeObservable(expectedProjectDetails)",
        "expect(component.isLoading).toBeFalse()",
        "expect(component.selectedFile).toEqual(mockProjectDetails.files[0])",
        "expect(component.errorMessage).toBe('Project ID is missing.')",
        "expect(projectService.getProjectDetail).not.toHaveBeenCalled()",
        "expect(component.errorMessage).toBe('Failed to load project details. Please try again.')",
        "expect(component.selectedFile).toEqual(mockFile)"
      ]
    }
  ],
  "e2eTests": [
    {
      "testFilePath": "cypress/e2e/login.cy.ts",
      "testDescription": "Login Flow",
      "testSteps": [
        "Visit the login page",
        "Enter valid Firebase ID token",
        "Click login button",
        "Verify redirection to dashboard"
      ],
      "expectedAssertions": [
        "cy.url().should('include', '/dashboard')",
        "cy.window().its('localStorage.token').should('exist')"
      ]
    },
    {
      "testFilePath": "cypress/e2e/dashboard.cy.ts",
      "testDescription": "Dashboard Project Listing",
      "testSteps": [
        "Log in as a user with projects",
        "Visit dashboard page",
        "Verify project cards are displayed",
        "Click on a project card",
        "Verify navigation to project detail page"
      ],
      "expectedAssertions": [
        "cy.get('app-project-card').should('have.length.greaterThan', 0)",
        "cy.url().should('include', '/projects/')"
      ]
    },
    {
      "testFilePath": "cypress/e2e/upload.cy.ts",
      "testDescription": "Single File Upload Flow",
      "testSteps": [
        "Log in as a user",
        "Visit upload page",
        "Select a file",
        "Enter project name (optional)",
        "Click upload button",
        "Verify progress bar is displayed",
        "Verify successful upload message",
        "Verify redirection to project detail page"
      ],
      "expectedAssertions": [
        "cy.get('input[type=\"file\"]').selectFile('test.txt')",
        "cy.get('app-progress-bar').should('be.visible')",
        "cy.contains('Upload Successful!').should('be.visible')",
        "cy.url().should('include', '/projects/')"
      ]
    },
    {
      "testFilePath": "cypress/e2e/project-detail.cy.ts",
      "testDescription": "Project Detail Page - File Explorer, Code Viewer, Chat",
      "testSteps": [
        "Log in as a user",
        "Navigate to a project detail page",
        "Verify file explorer displays files",
        "Click on a file in the explorer",
        "Verify code viewer displays file content",
        "Type a message in the chat box",
        "Send message",
        "Verify message appears in chat history"
      ],
      "expectedAssertions": [
        "cy.get('app-file-explorer').should('be.visible')",
        "cy.get('app-file-explorer .file-item').first().click()",
        "cy.get('app-code-viewer').should('contain.text', 'file content')",
        "cy.get('app-chat-box textarea').type('Hello AI')",
        "cy.get('app-chat-box button').click()",
        "cy.get('app-chat-box .message-list').should('contain.text', 'Hello AI')"
      ]
    }
  ]
}
